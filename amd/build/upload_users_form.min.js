define("block_user_delegation/upload_users_form",["jquery","core/log","core/config","core/str"],function($,log,cfg,str){var upload_users_form={strs:[],init:function(){$("#id_coursetoassign").change(function(){upload_users_form.load_course_groups()}),str.get_strings([{key:"addnewgroup",component:"block_user_delegation"},{key:"loadinggroups",component:"block_user_delegation"},{key:"nogroups",component:"block_user_delegation"},{key:"nogroupassign",component:"block_user_delegation"}]).then(function(results){upload_users_form.strs.addnewgroup=results[0],upload_users_form.strs.loadinggroups=results[1],upload_users_form.strs.nogroups=results[2],upload_users_form.strs.nogroupassign=results[3]}),this.load_course_groups(),log.debug("AMD User delegation upload users initialized.")},load_course_groups:function(){var courseid=$("#id_coursetoassign").val(),skey=$("[name='sesskey']").val();if(""===courseid||null===courseid||0===courseid)log.debug("No course selected"),$("#fitem_id_newgroupname").hide(),$("#id_grouptoassign").empty(),$("#id_grouptoassign").append("<option>"+upload_users_form.strs.loadinggroups+"</option>");else{$("#id_grouptoassign").empty(),$("#id_grouptoassign").append("<option>"+upload_users_form.strs.nogroupassign+"</option>");var params={action:"GetCourseGroups",sesskey:skey,cid:courseid},coursesurl=cfg.wwwroot+"/blocks/user_delegation/serverside/service.php";$.getJSON(coursesurl,params,function(data){$("#id_grouptoassign").empty(),$("#id_grouptoassign").append("<option value='-1'><b>"+upload_users_form.strs.addnewgroup+"</b></option>"),0==data.result?$("#id_grouptoassign").append("<option>"+upload_users_form.strs.nogroups+"</option>"):($("#id_grouptoassign").append("<option value='0'><b>"+upload_users_form.strs.nogroupassign+"</b></option>"),$.each(data.result,function(i,obj){$("#id_grouptoassign").append("<option value='"+obj.id+"'>"+obj.name+"</option>")})),$("#id_grouptoassign").on("change",function(){-1==$("#id_grouptoassign option:selected").val()?$("#fitem_id_newgroupname").show():$("#fitem_id_newgroupname").hide()})})}}};return upload_users_form});

//# sourceMappingURL=upload_users_form.min.js.map